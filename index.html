<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Armador de Pedidos</title>
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#b71c1c" />
    <style>
        :root {
            --main-color: #000000;
            --accent-color: #da3e52;
            --bg-color: #f9f9f9;
            --radius: 0.5rem;
            --font-main: "Poppins", sans-serif;
            --font-size-base: 1.1rem;



        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-size: var(--font-size-base);

        }

      body {
            font-family: var(--font-main);
            background: url("images/fondo-4.png") no-repeat center/cover fixed;
            color: var(--main-color);
            padding: 1.5rem;
            text-shadow: 0 0 1px #000000;
            color: var(--main-color);

        }

        h1,
        span {
            color: #000000;

        }

        h1 {
            margin-top: 15px;
        }

        .pedido {
            max-width: 600px;
            margin-inline: auto;
            background: rgba(255, 255, 255, 0.2);
            /* Semitransparente */

            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .pedido__logo {
            display: block;
            margin-inline: auto;
            width: 250px;
            max-width: 80%;

            object-fit: contain;

        }

        .glow-text {
            font-size: 2rem;
            font-weight: bold;
            color: rgb(255, 255, 255);
            /* Azul celeste */
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff, 0 0 40px #0ff;
        }

        .pedido__title {

            margin-inline: auto;
            margin-bottom: 1rem;
            text-align: center;
        }

        .boton:hover {
            filter: brightness(1.1);
            transform: scale(1.05);
            transition: 0.2s ease-out;

        }

        /* --- formulario --- */
        .pedido__form {
            display: flex;
            gap: .5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;

        }

        .pedido__select,
        .pedido__input,
        .pedido__btn {
            padding: .5rem;
            border: 1px solid black;
            border-radius: var(--radius);


        }

        .pedido__select,
        .pedido__input {
            flex: 1 1 40%;
        }

        .pedido__input {
            max-width: 100%;
            border: 1px solid rgb(255, 0, 0);
            padding: 0.7rem;
            border-radius: var(--radius);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }


        .pedido__btn {
            background-color: var(--accent-color);
            color: #fff;
            cursor: pointer;
            flex: 1 1 100%;
            transition: .2s;

        }

        .pedido__btn:hover {
            filter: brightness(1.1);

        }

        /* --- lista --- */
        .pedido__list {
            list-style: none;
            padding: 0;
            margin-bottom: 1rem;
        }

        .pedido__item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: .5rem;
            border-bottom: 1px dashed #ccc;
            gap: .5rem;
        }

        .pedido__delete {
            background: none;

            color: #b71c1c;
            cursor: pointer;
            font-size: 1.1rem;
            line-height: 1;

        }

        /* --- acciones --- */
        .pedido__actions {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
        }

        .pedido__actions button {
            flex: 1;
            padding: .5rem;
            border: 1px solid rgba(0, 0, 0, 0.651);
            border-radius: var(--radius);
            font-size: 1rem;
            cursor: pointer;
            transition: .2s;
            color: #fff;
        }

        .pedido__copy {
            background-color: #004c98;
        }

        .pedido__copy.copiado {
            background-color: #2e6c7d;
        }

        .pedido__reset {
            background-color: #9973019c;
        }
        #send-whatsapp {
            background-color: #018933;
            flex: 1 1 100%;
            margin-top: 25px;
            border-radius: 50px;
        }
       
    </style>
</head>

<body>
    <main class="pedido">
        <img src="images/hero 2.png" alt="Logo" class="pedido__logo">
        <h1 class="pedido__title glow-text">JOSÉ<br>[Armador de Pedidos]</h1>

        <!-- selector y carga -->
        <form class="pedido__form" id="form">
            <select class="pedido__select" id="producto">
                <option disabled selected>Elegí un producto</option>
            </select>
            <input type="text" class="pedido__input" id="cantidad" placeholder="Cantidad" inputmode="numeric" />



            <button class="pedido__btn boton" type="submit">Agregar</button>
        </form>

        <!-- lista -->
        <ul class="pedido__list" id="lista"></ul>

        <!-- acciones -->
        <div class="pedido__actions">
            <button class="pedido__copy boton" id="copiar">Copiar pedido</button>

            <button class="pedido__reset boton" id="reset">Reiniciar pedido</button>
            <button id="send-whatsapp" class="boton">Enviar Por WhatsApp</button>
        </div>
    </main>

    <!-- =================================SCRIPT====================================== -->
    <script>
        /* ---------- datos ---------- */
        const productos = ["asado", "vacío", "bife sin lomo", "bife con lomo", "bife de chorizo", "cuadril", "paleta", "roastbeef", "colita de cuadril", "peceto", "nalga", "bola de lomo", "cuadrada", "matambre", "entraña", "espinazo", "tortuguita", "palomita", "tapa de asado", "cima", "falda", "media completa", "media entera", "tapa de asado", "falda puchero", "osobuco", "cajón de pollo", "cajón de patamuslo", "cajón de suprema", "cajón de huevo", "alitas", "alitas y menudos", "picada comun", "picada especial", "grasa picada", "patitas cerdo", "pernil", "paleta de cerdo", "carré", "provoleta", "parmesano", "carbon", "salchicha parrillera"].sort();

        const productosPorKg = ["picada comun", "picada especial", "grasa picada"];

        /* ---------- nodos ---------- */
        const select = document.getElementById('producto');
        const cantidad = document.getElementById('cantidad');
        const lista = document.getElementById('lista');
        const form = document.getElementById('form');
        const copiar = document.getElementById('copiar');
        const reset = document.getElementById('reset');
        const sendBtn = document.getElementById('send-whatsapp');

        /* ---------- helpers ---------- */
        const guardar = () => localStorage.setItem('pedido', JSON.stringify(pedido));

        const render = () => {
            lista.innerHTML = '';
            pedido.forEach((item, idx) => {
                const li = document.createElement('li');
                li.className = 'pedido__item';
                li.innerHTML = `<span>${item}</span><button class="pedido__delete" data-index="${idx}" title="Eliminar">✖</button>`;
                lista.appendChild(li);
            });
        };

        /* ---------- init ---------- */
        productos.forEach(p => {
            const o = document.createElement('option');
            o.value = p;
            o.textContent = p;
            select.appendChild(o);
        });

        let pedido = JSON.parse(localStorage.getItem('pedido')) || [];
        render();

        /* ---------- eventos ---------- */
        form.addEventListener('submit', e => {
            e.preventDefault();
            const prod = select.value;
            const cant = cantidad.value.trim();
            if (!prod || !cant) return;
            const unidad = productosPorKg.includes(prod) ? "kg" : "";
            pedido.push(`${cant} ${unidad} ${prod}`);
            guardar();
            render();
            cantidad.value = '';
            cantidad.focus();
            select.selectedIndex = 0;
        });

        lista.addEventListener('click', e => {
            if (e.target.matches('.pedido__delete')) {
                const index = +e.target.dataset.index;
                pedido.splice(index, 1);
                guardar();
                render();
            }
        });

        copiar.addEventListener('click', () => {
            const texto = pedido.join('\n');
            navigator.clipboard.writeText(texto).then(() => {
                copiar.classList.add('copiado');
                copiar.textContent = '¡Copiado!';
                setTimeout(() => {
                    copiar.classList.remove('copiado');
                    copiar.textContent = 'Copiar pedido';
                }, 1500);
            });
        });

        reset.addEventListener('click', () => {
            if (confirm('¿Borrar todo el pedido?')) {
                pedido = [];
                guardar();
                render();
            }
        });

        sendBtn.addEventListener('click', () => {
            const texto = pedido.join('%0A');
            if (!texto) {
                alert('El pedido está vacío');
                return;
            }
            const numero = '+5491168497526';
            const url = `https://wa.me/${numero}?text=${texto}`;
            window.open(url, '_blank');
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => navigator.serviceWorker.register('service-worker.js'));
        }
    </script>

</body>

</html>