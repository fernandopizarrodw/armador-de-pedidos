<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Armador de Pedidos</title>
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#b71c1c" />
    <style>
        :root {
            --main-color: #000000;
            --accent-color: #da3e52;
            --bg-color: #f9f9f9;
            --radius: 0.5rem;
            --font-main: system-ui, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background: url("/images/fondo\ 4.png") no-repeat center/cover fixed;
            color: var(--main-color);
            padding: 1.5rem;
            text-shadow: 0 0 1px #07cdff;
            color: var(--main-color);
        }
        h1, span {
            color: #000000;
        }
        h1 {
            margin-top: 15px;
        }
        .pedido {
            max-width: 600px;
            margin-inline: auto;
            background: white;
            padding: 2rem;
            
            border-radius: var(--radius);
            box-shadow: 0 0 10px rgba(0, 0, 0, .05);
        }

        .pedido__logo {
            display: block;
            margin-inline: auto;
            width: 250px;
            max-width: 80%;
            
            object-fit: contain;
            
        }

        .pedido__title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* --- formulario --- */
        .pedido__form {
            display: flex;
            gap: .5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .pedido__select,
        .pedido__input,
        .pedido__btn {
            padding: .5rem;
            border: 1px solid #ccc;
            border-radius: var(--radius);
            font-size: 1rem;
            
        }

        .pedido__select,
        .pedido__input {
            flex: 1 1 40%;
        }

        .pedido__btn {
            background-color: var(--accent-color);
            color: #fff;
            cursor: pointer;
            flex: 1 1 100%;
            transition: .2s;
        }

        .pedido__btn:hover {
            filter: brightness(1.1);
        }

        /* --- lista --- */
        .pedido__list {
            list-style: none;
            padding: 0;
            margin-bottom: 1rem;
        }

        .pedido__item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: .5rem;
            border-bottom: 1px dashed #ccc;
            gap: .5rem;
        }

        .pedido__delete {
            background: none;
            border: none;
            color: #b71c1c;
            cursor: pointer;
            font-size: 1.1rem;
            line-height: 1;
        }

        /* --- acciones --- */
        .pedido__actions {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
        }

        .pedido__actions button {
            flex: 1;
            padding: .5rem;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            cursor: pointer;
            transition: .2s;
            color: #fff;
        }

        .pedido__copy {
            background-color: #004c98;
        }

        .pedido__copy.copiado {
            background-color: #2e6c7d;
        }

        .pedido__reset {
            background-color: #9973019c;
        }

        #send-whatsapp {
            background-color: #25d366;
            flex: 1 1 100%;
            margin-top: 25px;
            border-radius: 50px;
        }

        @media (prefers-color-scheme:dark) {
            body {
                color: #eee;
            }

            .pedido {
                background: #ffffff;
            }

            .pedido__btn {
                background: #c62847;
            }
        }
    </style>
</head>

<body>
    <main class="pedido">
        <img src="images/hero 2.png" alt="Logo" class="pedido__logo">
        <h1 class="pedido__title">JOSÉ<br>[Armador de Pedidos]</h1>

        <!-- selector y carga -->
        <form class="pedido__form" id="form">
            <select class="pedido__select" id="producto">
                <option disabled selected>Elegí un producto</option>
            </select>
            <input type="text" class="pedido__input" id="cantidad" placeholder="Cantidad" inputmode="numeric" />
            <button class="pedido__btn" type="submit">Agregar</button>
        </form>

        <!-- lista -->
        <ul class="pedido__list" id="lista"></ul>

        <!-- acciones -->
        <div class="pedido__actions">
            <button class="pedido__copy" id="copiar">Copiar pedido</button>
            <button class="pedido__reset" id="reset">Reiniciar</button>
            <button id="send-whatsapp">Enviar WhatsApp</button>
        </div>
    </main>

    <script>
        /* ---------- datos ---------- */
        const productos = ["asado", "vacío", "bife sin lomo", "bife chorizo", "cuadril", "paleta", "roastbeef", "colita", "peceto", "nalga", "bola", "cuadrada", "matambre", "entraña", "espinazo", "tortuguita", "tortuga", "palomita", "paloma", "tapa", "cima", "falda", "media completa", "media entera", "tapa asado", "falda puchero", "osobuco", "cajón pollo", "cajón patamuslo", "cajón suprema", "cajón huevo", "alita", "menudo", "alita y menudos", "menudo alita", "cajón alita", "cajón menudo", "picada comun", "picada especial", "grasa picada", "grasa", "patitas cerdo", "pernil", "paleta de cerdo", "carré", "provoleta", "parmesano", "carbon", "salchicha parrillera"].sort();

        /* ---------- nodos ---------- */
        const select = document.getElementById('producto');
        const cantidad = document.getElementById('cantidad');
        const lista = document.getElementById('lista');
        const form = document.getElementById('form');
        const copiar = document.getElementById('copiar');
        const reset = document.getElementById('reset');
        const sendBtn = document.getElementById('send-whatsapp');

        /* ---------- helpers ---------- */
        const guardar = () => localStorage.setItem('pedido', JSON.stringify(pedido));

        const render = () => {
            lista.innerHTML = '';
            pedido.forEach((item, idx) => {
                const li = document.createElement('li');
                li.className = 'pedido__item';
                li.innerHTML = `<span>${item}</span><button class="pedido__delete" data-index="${idx}" title="Eliminar">✖</button>`;
                lista.appendChild(li);
            });
        };

        /* ---------- init ---------- */
        productos.forEach(p => {
            const o = document.createElement('option'); o.value = p; o.textContent = p; select.appendChild(o);
        });

        let pedido = JSON.parse(localStorage.getItem('pedido')) || [];
        render();

        /* ---------- eventos ---------- */
        form.addEventListener('submit', e => {
            e.preventDefault();
            const prod = select.value;
            const cant = cantidad.value.trim();
            if (!prod || !cant) return;
            pedido.push(`${cant} ${prod}`);
            guardar();
            render();
            cantidad.value = '';
            cantidad.focus();
            select.selectedIndex = 0;
        });

        lista.addEventListener('click', e => {
            if (e.target.matches('.pedido__delete')) {
                const index = +e.target.dataset.index;
                pedido.splice(index, 1);
                guardar();
                render();
            }
        });

        copiar.addEventListener('click', () => {
            const texto = pedido.join('\n');
            navigator.clipboard.writeText(texto).then(() => {
                copiar.classList.add('copiado');
                copiar.textContent = '¡Copiado!';
                setTimeout(() => { copiar.classList.remove('copiado'); copiar.textContent = 'Copiar pedido'; }, 1500);
            });
        });

        reset.addEventListener('click', () => {
            if (confirm('¿Borrar todo el pedido?')) {
                pedido = [];
                guardar();
                render();
            }
        });

        sendBtn.addEventListener('click', () => {
            const texto = pedido.join('%0A');
            if (!texto) { alert('El pedido está vacío'); return; }
            const numero = '+549XXXXXXXXXX';
            const url = `https://wa.me/${numero}?text=${texto}`;
            window.open(url, '_blank');
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => navigator.serviceWorker.register('service-worker.js'));
        }
    </script>
</body>

</html>